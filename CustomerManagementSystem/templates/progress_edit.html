{% extends "base.html" %}
{% block title %}編輯工程進度 - {{ record.customer_name }}{% endblock %}
{% block content %}
<div class="mt-5">
  <h2 class="mb-4">編輯工程進度 - {{ record.customer_name }}</h2>
  <form method="POST" action="{{ url_for('edit_progress', id=record.id) }}" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="quotation_confirm_file" class="form-label">上傳報價單確認文件</label>
      {% if record.quotation_confirm_file %}
        <p>現有文件：
          <a href="{{ url_for('uploaded_file', filename=record.quotation_confirm_file) }}" target="_blank">下載</a>
        </p>
      {% else %}
        <p class="text-muted">尚未上傳文件</p>
      {% endif %}
      <input type="file" name="quotation_confirm_file" id="quotation_confirm_file" class="form-control">
    </div>
    <div class="mb-3">
      <label for="quotation_confirm_date" class="form-label">報價確認日期</label>
      <input type="date" name="quotation_confirm_date" id="quotation_confirm_date" class="form-control" value="{{ record.quotation_confirm_date }}">
    </div>
    <div class="mb-3">
      <label for="start_construction_date" class="form-label">開始施工日期</label>
      <input type="date" name="start_construction_date" id="start_construction_date" class="form-control" value="{{ record.start_construction_date }}">
    </div>
    <div class="mb-3">
      <label for="completed_date" class="form-label">完工日期</label>
      <input type="date" name="completed_date" id="completed_date" class="form-control" value="{{ record.completed_date }}">
    </div>
    <button type="submit" class="btn btn-primary">更新工程進度</button>
    <a href="{{ url_for('progress') }}" class="btn btn-secondary">取消</a>
  </form>
</div>
{% endblock %}
